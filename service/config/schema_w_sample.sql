
-- SCHEMA --

CREATE TABLE IF NOT EXISTS `location` (
    `id` INT NOT NULL AUTO_INCREMENT,
    `title` VARCHAR(255) NOT NULL,
    `rank` INT NULL,
    `enabled` BOOLEAN NOT NULL,
    `fk_parent` INT NULL,
    `description` LONGTEXT NULL,
    FOREIGN KEY (fk_parent) REFERENCES location (id),
    PRIMARY KEY (`id`)
) ENGINE=InnoDB ;


CREATE TABLE IF NOT EXISTS `initiative` (
    `id` INT NOT NULL AUTO_INCREMENT,
    `title` VARCHAR(255) NOT NULL,
    `enabled` BOOLEAN NOT NULL,
    `fk_root_location` INT NULL,
    `description` LONGTEXT NULL,
    FOREIGN KEY (fk_root_location) REFERENCES location (id),
    UNIQUE (title),
    PRIMARY KEY (`id`)
) ENGINE=InnoDB ;


CREATE TABLE IF NOT EXISTS `activity` (
    `id` INT NOT NULL AUTO_INCREMENT,
    `title` VARCHAR(255) NOT NULL,
    `enabled` BOOLEAN NOT NULL,
    `fk_initiative` INT NOT NULL,
    `rank` INT NULL,
    `description` LONGTEXT NULL,
    FOREIGN KEY (fk_initiative) REFERENCES initiative (id),
    UNIQUE (title, fk_initiative),
    PRIMARY KEY (`id`)
) ENGINE=InnoDB ;


CREATE TABLE IF NOT EXISTS `transaction` (
    `id` BIGINT NOT NULL AUTO_INCREMENT,
    `start` TIMESTAMP NULL,
    `end` TIMESTAMP NULL,
    `device` VARCHAR(255) NULL,
    `version` VARCHAR(255) NULL,
    PRIMARY KEY (`id`)
) ENGINE=InnoDB ;


CREATE TABLE IF NOT EXISTS `session` (
    `id` BIGINT NOT NULL AUTO_INCREMENT,
    `start` TIMESTAMP NULL,
    `end` TIMESTAMP NULL,
    `fk_initiative` INT NOT NULL,
    `fk_transaction` BIGINT NOT NULL,
    `deleted` BOOLEAN NOT NULL DEFAULT false,
    FOREIGN KEY (fk_initiative) REFERENCES initiative (id),
    FOREIGN KEY (fk_transaction) REFERENCES transaction (id),
    PRIMARY KEY (`id`)
) ENGINE=InnoDB ;


CREATE TABLE IF NOT EXISTS `count` (
    `id` BIGINT NOT NULL AUTO_INCREMENT,
    `occurrence` TIMESTAMP NULL,
    `number` INT NOT NULL,
    `fk_location` INT NOT NULL,
    `fk_session` BIGINT NOT NULL,
    FOREIGN KEY (fk_location) REFERENCES location (id),
    FOREIGN KEY (fk_session) REFERENCES session (id),
    PRIMARY KEY (`id`)
) ENGINE=InnoDB ;


CREATE TABLE IF NOT EXISTS `count_activity_join` (
    `id` BIGINT NOT NULL AUTO_INCREMENT,
    `fk_count` BIGINT NOT NULL,
    `fk_activity` INT NOT NULL,
    FOREIGN KEY (fk_count) REFERENCES count (id),
    FOREIGN KEY (fk_activity) REFERENCES activity (id),
    PRIMARY KEY (`id`)
) ENGINE=InnoDB ;


-- SAMPLE DATA --


INSERT INTO `location` (`id`, `title`, `rank`, `enabled`, `fk_parent`, `description`) VALUES
(1, 'Sample Library', 0, 1, NULL, 'Small but effective.'),
(2, 'Ground Floor', 2, 1, 1, ''),
(3, 'Lobby', 3, 1, 1, ''),
(4, 'West Wing', 0, 1, 1, ''),
(5, 'Quiet Reading Room', 0, 1, 4, ''),
(6, 'IT Teaching Center', 1, 1, 4, ''),
(7, 'East Wing', 1, 1, 1, ''),
(8, 'Media Lab', 0, 1, 7, ''),
(9, 'Learning Commons', 1, 1, 7, '');


INSERT INTO `initiative` (`id`, `title`, `enabled`, `fk_root_location`, `description`) VALUES
(1, 'Sample Initiative', 1, 1, 'Description would go here.');


INSERT INTO `transaction` (`id`, `start`, `end`, `device`, `version`) VALUES
(1, '2011-12-15 14:40:55', '2011-12-15 14:40:56', 'iPad', '0.6.5'),
(2, '2011-12-15 14:43:02', '2011-12-15 14:43:02', 'iPad', '0.6.5'),
(3, '2011-12-15 15:07:53', '2011-12-15 15:07:53', 'iPad', '0.6.5');


INSERT INTO `session` (`id`, `start`, `end`, `fk_initiative`, `fk_transaction`, `deleted`) VALUES
(1, '2011-12-15 14:52:40', '2011-12-15 14:55:36', 1, 1, 0),
(2, '2011-12-15 14:55:52', '2011-12-15 14:57:46', 1, 2, 0),
(3, '2011-12-15 15:20:02', '2011-12-15 15:22:34', 1, 3, 0);


INSERT INTO `activity` (`id`, `title`, `enabled`, `fk_initiative`, `rank`, `description`) VALUES
(1, 'Reading', 1, 1, 0, ''),
(2, 'Computing', 1, 1, 1, ''),
(3, 'Collaborating', 1, 1, 2, ''),
(4, 'Training/Class', 1, 1, 3, '');


INSERT INTO `count` (`id`, `occurrence`, `number`, `fk_location`, `fk_session`) VALUES
(1, '2011-12-15 14:52:43', 1, 2, 1),
(2, '2011-12-15 14:52:44', 1, 2, 1),
(3, '2011-12-15 14:52:45', 1, 2, 1),
(4, '2011-12-15 14:52:45', 1, 2, 1),
(5, '2011-12-15 14:52:46', 1, 2, 1),
(6, '2011-12-15 14:52:46', 1, 2, 1),
(7, '2011-12-15 14:52:47', 1, 2, 1),
(8, '2011-12-15 14:52:47', 1, 2, 1),
(9, '2011-12-15 14:52:47', 1, 2, 1),
(10, '2011-12-15 14:52:47', 1, 2, 1),
(11, '2011-12-15 14:52:47', 1, 2, 1),
(12, '2011-12-15 14:52:47', 1, 2, 1),
(13, '2011-12-15 14:52:48', 1, 2, 1),
(14, '2011-12-15 14:52:48', 1, 2, 1),
(15, '2011-12-15 14:52:48', 1, 2, 1),
(16, '2011-12-15 14:52:48', 1, 2, 1),
(17, '2011-12-15 14:52:48', 1, 2, 1),
(18, '2011-12-15 14:52:48', 1, 2, 1),
(19, '2011-12-15 14:52:48', 1, 2, 1),
(20, '2011-12-15 14:52:48', 1, 2, 1),
(21, '2011-12-15 14:52:49', 1, 2, 1),
(22, '2011-12-15 14:52:49', 1, 2, 1),
(23, '2011-12-15 14:52:54', 1, 2, 1),
(24, '2011-12-15 14:52:55', 1, 2, 1),
(25, '2011-12-15 14:52:57', 1, 2, 1),
(26, '2011-12-15 14:52:58', 1, 2, 1),
(27, '2011-12-15 14:53:00', 1, 2, 1),
(28, '2011-12-15 14:53:01', 1, 2, 1),
(29, '2011-12-15 14:53:02', 1, 2, 1),
(30, '2011-12-15 14:53:07', 1, 2, 1),
(31, '2011-12-15 14:53:09', 1, 2, 1),
(32, '2011-12-15 14:53:11', 1, 2, 1),
(33, '2011-12-15 14:53:24', 1, 8, 1),
(34, '2011-12-15 14:53:25', 1, 8, 1),
(35, '2011-12-15 14:53:27', 1, 8, 1),
(36, '2011-12-15 14:53:28', 1, 8, 1),
(37, '2011-12-15 14:53:30', 1, 8, 1),
(38, '2011-12-15 14:53:31', 1, 8, 1),
(39, '2011-12-15 14:53:33', 1, 8, 1),
(40, '2011-12-15 14:53:35', 1, 8, 1),
(41, '2011-12-15 14:53:37', 1, 8, 1),
(42, '2011-12-15 14:53:39', 1, 8, 1),
(43, '2011-12-15 14:53:42', 1, 8, 1),
(44, '2011-12-15 14:53:44', 1, 8, 1),
(45, '2011-12-15 14:53:46', 1, 8, 1),
(46, '2011-12-15 14:53:48', 1, 8, 1),
(47, '2011-12-15 14:53:50', 1, 8, 1),
(48, '2011-12-15 14:53:51', 1, 8, 1),
(49, '2011-12-15 14:53:52', 1, 8, 1),
(50, '2011-12-15 14:53:53', 1, 8, 1),
(51, '2011-12-15 14:53:55', 1, 8, 1),
(52, '2011-12-15 14:53:56', 1, 8, 1),
(53, '2011-12-15 14:54:04', 1, 9, 1),
(54, '2011-12-15 14:54:05', 1, 9, 1),
(55, '2011-12-15 14:54:07', 1, 9, 1),
(56, '2011-12-15 14:54:08', 1, 9, 1),
(57, '2011-12-15 14:54:09', 1, 9, 1),
(58, '2011-12-15 14:54:10', 1, 9, 1),
(59, '2011-12-15 14:54:11', 1, 9, 1),
(60, '2011-12-15 14:54:12', 1, 9, 1),
(61, '2011-12-15 14:54:14', 1, 9, 1),
(62, '2011-12-15 14:54:17', 1, 9, 1),
(63, '2011-12-15 14:54:18', 1, 9, 1),
(64, '2011-12-15 14:54:20', 1, 9, 1),
(65, '2011-12-15 14:54:21', 1, 9, 1),
(66, '2011-12-15 14:54:22', 1, 9, 1),
(67, '2011-12-15 14:54:23', 1, 9, 1),
(68, '2011-12-15 14:54:24', 1, 9, 1),
(69, '2011-12-15 14:54:25', 1, 9, 1),
(70, '2011-12-15 14:54:26', 1, 9, 1),
(71, '2011-12-15 14:54:27', 1, 9, 1),
(72, '2011-12-15 14:54:28', 1, 9, 1),
(73, '2011-12-15 14:54:28', 1, 9, 1),
(74, '2011-12-15 14:54:28', 1, 9, 1),
(75, '2011-12-15 14:54:28', 1, 9, 1),
(76, '2011-12-15 14:54:29', 1, 9, 1),
(77, '2011-12-15 14:54:35', 1, 3, 1),
(78, '2011-12-15 14:54:39', 1, 3, 1),
(79, '2011-12-15 14:54:41', 1, 3, 1),
(80, '2011-12-15 14:54:42', 1, 3, 1),
(81, '2011-12-15 14:54:43', 1, 3, 1),
(82, '2011-12-15 14:54:43', 1, 3, 1),
(83, '2011-12-15 14:54:44', 1, 3, 1),
(84, '2011-12-15 14:54:44', 1, 3, 1),
(85, '2011-12-15 14:54:44', 1, 3, 1),
(86, '2011-12-15 14:54:45', 1, 3, 1),
(87, '2011-12-15 14:55:13', 1, 5, 1),
(88, '2011-12-15 14:55:14', 1, 5, 1),
(89, '2011-12-15 14:55:16', 1, 5, 1),
(90, '2011-12-15 14:55:17', 1, 5, 1),
(91, '2011-12-15 14:55:19', 1, 5, 1),
(92, '2011-12-15 14:55:20', 1, 5, 1),
(93, '2011-12-15 14:55:22', 1, 5, 1),
(94, '2011-12-15 14:55:23', 1, 5, 1),
(95, '2011-12-15 14:55:25', 1, 5, 1),
(96, '2011-12-15 14:55:26', 1, 5, 1),
(97, '2011-12-15 14:55:28', 1, 5, 1),
(98, '2011-12-15 14:55:29', 1, 5, 1),
(99, '2011-12-15 14:55:30', 1, 5, 1),
(100, '2011-12-15 14:55:32', 1, 5, 1),
(101, '2011-12-15 14:55:33', 1, 5, 1),
(102, '2011-12-15 14:56:14', 1, 6, 2),
(103, '2011-12-15 14:56:16', 1, 6, 2),
(104, '2011-12-15 14:56:17', 1, 6, 2),
(105, '2011-12-15 14:56:25', 1, 6, 2),
(106, '2011-12-15 14:56:28', 1, 6, 2),
(107, '2011-12-15 14:56:30', 1, 6, 2),
(108, '2011-12-15 14:56:33', 1, 6, 2),
(109, '2011-12-15 14:56:35', 1, 6, 2),
(110, '2011-12-15 14:56:37', 1, 6, 2),
(111, '2011-12-15 14:56:41', 1, 6, 2),
(112, '2011-12-15 14:56:43', 1, 6, 2),
(113, '2011-12-15 14:56:45', 1, 6, 2),
(114, '2011-12-15 14:56:47', 1, 6, 2),
(115, '2011-12-15 14:56:49', 1, 6, 2),
(116, '2011-12-15 14:56:52', 1, 6, 2),
(117, '2011-12-15 14:56:54', 1, 6, 2),
(118, '2011-12-15 14:56:56', 1, 6, 2),
(119, '2011-12-15 14:56:58', 1, 6, 2),
(120, '2011-12-15 14:57:01', 1, 6, 2),
(121, '2011-12-15 14:57:02', 1, 6, 2),
(122, '2011-12-15 14:57:05', 1, 6, 2),
(123, '2011-12-15 14:57:08', 1, 6, 2),
(124, '2011-12-15 14:57:10', 1, 6, 2),
(125, '2011-12-15 14:57:13', 1, 6, 2),
(126, '2011-12-15 14:57:15', 1, 6, 2),
(127, '2011-12-15 14:57:17', 1, 6, 2),
(128, '2011-12-15 14:57:19', 1, 6, 2),
(129, '2011-12-15 14:57:21', 1, 6, 2),
(130, '2011-12-15 14:57:23', 1, 6, 2),
(131, '2011-12-15 14:57:25', 1, 6, 2),
(132, '2011-12-15 15:20:09', 1, 2, 3),
(133, '2011-12-15 15:20:13', 1, 2, 3),
(134, '2011-12-15 15:20:15', 1, 2, 3),
(135, '2011-12-15 15:20:16', 1, 2, 3),
(136, '2011-12-15 15:20:17', 1, 2, 3),
(137, '2011-12-15 15:20:17', 1, 2, 3),
(138, '2011-12-15 15:20:17', 1, 2, 3),
(139, '2011-12-15 15:20:17', 1, 2, 3),
(140, '2011-12-15 15:20:18', 1, 2, 3),
(141, '2011-12-15 15:20:18', 1, 2, 3),
(142, '2011-12-15 15:20:18', 1, 2, 3),
(143, '2011-12-15 15:20:18', 1, 2, 3),
(144, '2011-12-15 15:20:18', 1, 2, 3),
(145, '2011-12-15 15:20:18', 1, 2, 3),
(146, '2011-12-15 15:20:19', 1, 2, 3),
(147, '2011-12-15 15:20:19', 1, 2, 3),
(148, '2011-12-15 15:20:19', 1, 2, 3),
(149, '2011-12-15 15:20:19', 1, 2, 3),
(150, '2011-12-15 15:20:19', 1, 2, 3),
(151, '2011-12-15 15:20:19', 1, 2, 3),
(152, '2011-12-15 15:20:19', 1, 2, 3),
(153, '2011-12-15 15:20:19', 1, 2, 3),
(154, '2011-12-15 15:20:19', 1, 2, 3),
(155, '2011-12-15 15:20:20', 1, 2, 3),
(156, '2011-12-15 15:20:20', 1, 2, 3),
(157, '2011-12-15 15:20:21', 1, 2, 3),
(158, '2011-12-15 15:20:21', 1, 2, 3),
(159, '2011-12-15 15:20:21', 1, 2, 3),
(160, '2011-12-15 15:20:21', 1, 2, 3),
(161, '2011-12-15 15:20:21', 1, 2, 3),
(162, '2011-12-15 15:20:21', 1, 2, 3),
(163, '2011-12-15 15:20:22', 1, 2, 3),
(164, '2011-12-15 15:20:27', 1, 3, 3),
(165, '2011-12-15 15:20:27', 1, 3, 3),
(166, '2011-12-15 15:20:27', 1, 3, 3),
(167, '2011-12-15 15:20:32', 1, 3, 3),
(168, '2011-12-15 15:20:33', 1, 3, 3),
(169, '2011-12-15 15:20:34', 1, 3, 3),
(170, '2011-12-15 15:20:42', 1, 9, 3),
(171, '2011-12-15 15:20:45', 1, 9, 3),
(172, '2011-12-15 15:20:46', 1, 9, 3),
(173, '2011-12-15 15:20:48', 1, 9, 3),
(174, '2011-12-15 15:20:49', 1, 9, 3),
(175, '2011-12-15 15:20:50', 1, 9, 3),
(176, '2011-12-15 15:20:52', 1, 9, 3),
(177, '2011-12-15 15:20:53', 1, 9, 3),
(178, '2011-12-15 15:20:53', 1, 9, 3),
(179, '2011-12-15 15:20:54', 1, 9, 3),
(180, '2011-12-15 15:20:54', 1, 9, 3),
(181, '2011-12-15 15:20:54', 1, 9, 3),
(182, '2011-12-15 15:20:54', 1, 9, 3),
(183, '2011-12-15 15:20:55', 1, 9, 3),
(184, '2011-12-15 15:20:55', 1, 9, 3),
(185, '2011-12-15 15:20:55', 1, 9, 3),
(186, '2011-12-15 15:20:55', 1, 9, 3),
(187, '2011-12-15 15:20:55', 1, 9, 3),
(188, '2011-12-15 15:20:55', 1, 9, 3),
(189, '2011-12-15 15:20:55', 1, 9, 3),
(190, '2011-12-15 15:20:55', 1, 9, 3),
(191, '2011-12-15 15:20:57', 1, 9, 3),
(192, '2011-12-15 15:20:58', 1, 9, 3),
(193, '2011-12-15 15:21:00', 1, 9, 3),
(194, '2011-12-15 15:21:01', 1, 9, 3),
(195, '2011-12-15 15:21:04', 1, 8, 3),
(196, '2011-12-15 15:21:05', 1, 8, 3),
(197, '2011-12-15 15:21:24', 1, 8, 3),
(198, '2011-12-15 15:21:26', 1, 8, 3),
(199, '2011-12-15 15:21:29', 1, 8, 3),
(200, '2011-12-15 15:21:32', 1, 8, 3),
(201, '2011-12-15 15:21:34', 1, 8, 3),
(202, '2011-12-15 15:21:36', 1, 8, 3),
(203, '2011-12-15 15:21:46', 0, 6, 3),
(204, '2011-12-15 15:21:55', 1, 5, 3),
(205, '2011-12-15 15:21:57', 1, 5, 3),
(206, '2011-12-15 15:21:58', 1, 5, 3),
(207, '2011-12-15 15:22:00', 1, 5, 3),
(208, '2011-12-15 15:22:01', 1, 5, 3),
(209, '2011-12-15 15:22:03', 1, 5, 3),
(210, '2011-12-15 15:22:04', 1, 5, 3),
(211, '2011-12-15 15:22:06', 1, 5, 3),
(212, '2011-12-15 15:22:07', 1, 5, 3),
(213, '2011-12-15 15:22:08', 1, 5, 3),
(214, '2011-12-15 15:22:10', 1, 5, 3),
(215, '2011-12-15 15:22:11', 1, 5, 3),
(216, '2011-12-15 15:22:12', 1, 5, 3),
(217, '2011-12-15 15:22:14', 1, 5, 3),
(218, '2011-12-15 15:22:15', 1, 5, 3),
(219, '2011-12-15 15:22:16', 1, 5, 3),
(220, '2011-12-15 15:22:17', 1, 5, 3),
(221, '2011-12-15 15:22:18', 1, 5, 3),
(222, '2011-12-15 15:22:20', 1, 5, 3);


INSERT INTO `count_activity_join` (`id`, `fk_count`, `fk_activity`) VALUES
(1, 23, 3),
(2, 24, 3),
(3, 25, 3),
(4, 26, 3),
(5, 27, 3),
(6, 28, 3),
(7, 29, 3),
(8, 30, 1),
(9, 31, 1),
(10, 32, 1),
(11, 33, 2),
(12, 34, 2),
(13, 35, 2),
(14, 36, 2),
(15, 37, 2),
(16, 38, 2),
(17, 39, 2),
(18, 39, 3),
(19, 40, 2),
(20, 40, 3),
(21, 41, 2),
(22, 41, 3),
(23, 42, 2),
(24, 42, 3),
(25, 43, 2),
(26, 43, 3),
(27, 44, 2),
(28, 44, 3),
(29, 45, 2),
(30, 45, 3),
(31, 46, 2),
(32, 47, 2),
(33, 48, 2),
(34, 49, 2),
(35, 50, 2),
(36, 51, 2),
(37, 52, 2),
(38, 53, 1),
(39, 54, 1),
(40, 55, 1),
(41, 56, 1),
(42, 57, 1),
(43, 58, 1),
(44, 60, 1),
(45, 61, 1),
(46, 62, 3),
(47, 63, 3),
(48, 64, 3),
(49, 65, 3),
(50, 66, 3),
(51, 68, 3),
(52, 78, 3),
(53, 79, 3),
(54, 80, 3),
(55, 87, 1),
(56, 88, 1),
(57, 89, 1),
(58, 90, 1),
(59, 91, 1),
(60, 92, 1),
(61, 93, 1),
(62, 94, 1),
(63, 95, 1),
(64, 96, 1),
(65, 97, 1),
(66, 98, 1),
(67, 99, 1),
(68, 100, 1),
(69, 101, 1),
(70, 102, 4),
(71, 103, 4),
(72, 104, 4),
(73, 105, 2),
(74, 105, 4),
(75, 106, 2),
(76, 106, 4),
(77, 107, 2),
(78, 107, 4),
(79, 108, 2),
(80, 108, 4),
(81, 109, 2),
(82, 109, 4),
(83, 110, 2),
(84, 110, 4),
(85, 111, 2),
(86, 111, 4),
(87, 112, 2),
(88, 112, 4),
(89, 113, 2),
(90, 113, 4),
(91, 114, 2),
(92, 114, 4),
(93, 115, 2),
(94, 115, 4),
(95, 116, 2),
(96, 116, 4),
(97, 117, 2),
(98, 117, 4),
(99, 118, 2),
(100, 118, 4),
(101, 119, 2),
(102, 119, 4),
(103, 120, 2),
(104, 120, 4),
(105, 121, 2),
(106, 121, 4),
(107, 122, 2),
(108, 122, 4),
(109, 123, 2),
(110, 123, 4),
(111, 124, 2),
(112, 124, 4),
(113, 125, 2),
(114, 125, 4),
(115, 126, 2),
(116, 126, 4),
(117, 127, 2),
(118, 127, 4),
(119, 128, 2),
(120, 128, 4),
(121, 129, 2),
(122, 129, 4),
(123, 130, 2),
(124, 130, 4),
(125, 131, 2),
(126, 131, 4),
(127, 132, 3),
(128, 133, 1),
(129, 133, 3),
(130, 134, 3),
(131, 135, 3),
(132, 170, 2),
(133, 171, 2),
(134, 173, 2),
(135, 174, 2),
(136, 175, 1),
(137, 176, 1),
(138, 191, 3),
(139, 192, 3),
(140, 193, 3),
(141, 194, 3),
(142, 197, 2),
(143, 198, 2),
(144, 199, 2),
(145, 199, 3),
(146, 200, 2),
(147, 200, 3),
(148, 201, 2),
(149, 201, 3),
(150, 202, 3),
(151, 204, 1),
(152, 205, 1),
(153, 206, 1),
(154, 207, 1),
(155, 208, 1),
(156, 209, 1),
(157, 210, 1),
(158, 211, 1),
(159, 212, 1),
(160, 213, 1),
(161, 214, 1),
(162, 215, 1),
(163, 216, 1),
(164, 217, 1),
(165, 218, 1),
(166, 219, 1),
(167, 220, 1),
(168, 221, 1),
(169, 222, 1);

