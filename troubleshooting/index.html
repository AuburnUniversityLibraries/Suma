<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Troubleshooting - Suma</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Troubleshooting";
    var mkdocs_page_input_path = "troubleshooting.md";
    var mkdocs_page_url = "/Suma/troubleshooting/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Suma</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Overview</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../quickstart/">Quickstart</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installation/">Installation</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Troubleshooting</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#troubleshooting">Troubleshooting</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#client-errors">Client Errors</a></li>
        
            <li><a class="toctree-l3" href="#configuration-errors">Configuration Errors</a></li>
        
            <li><a class="toctree-l3" href="#suma-on-selinux">Suma on SELinux</a></li>
        
            <li><a class="toctree-l3" href="#github-issues">GitHub Issues</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../faq/">Frequently Asked Questions</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../logs/">Logs</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../queryserver/">Queryserver</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../developer/">Developer</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../upgrade_1.0/">Upgrade 1.0</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../upgrade_2.0/">Upgrade 2.0</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Suma</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Troubleshooting</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/suma-project/Suma/edit/master/docs/troubleshooting.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="troubleshooting">Troubleshooting</h1>
<h2 id="client-errors">Client Errors</h2>
<h3 id="ios-websql-error">iOS WebSQL error</h3>
<ul>
<li>The latest iOS version deprecates WebSQL which the Suma client depends on to
  work. If you are using iOS version 13 or above, and are running into an error in the
  Suma collection client that says "Error in browser (Web SQL) database
  setup..." see the bottom of this page for a workaround to turn WebSQL back on: <a href="https://blog.appstudio.dev/2019/09/the-future-of-sqlite/">https://blog.appstudio.dev/2019/09/the-future-of-sqlite/</a><ul>
<li>See this GitHub issue for more information and discussion on steps
  forward for the client: <a href="https://github.com/suma-project/Suma/issues/88">https://github.com/suma-project/Suma/issues/88</a></li>
</ul>
</li>
</ul>
<h2 id="configuration-errors">Configuration Errors</h2>
<h3 id="server-environment">Server Environment</h3>
<ul>
<li>Suma depends upon a number of PHP libraries that are often named different things in different server environments. If you are experiencing unexpected issues after installing Suma, please check your server logs for clues to missing PHP modules.</li>
</ul>
<h3 id="suma-server-configuration">Suma Server Configuration</h3>
<ul>
<li>
<p>Issues with the <code>SUMA_SERVER_PATH</code> will be reported as a <code>Possible error in SUMA_SERVER_PATH</code>.</p>
</li>
<li>
<p>An <code>Invalid controller specified (error)</code> may indicate an issue with the <code>SUMA_CONTROLLER_PATH</code> and will also be reported as a <code>Possible error in SUMA_CONTROLLER_PATH</code>.  </p>
</li>
<li>
<p>Issues <code>SUMA_BASE_URL</code> will be reported as a <code>404 Not Found</code> error.</p>
</li>
</ul>
<h2 id="suma-on-selinux">Suma on SELinux</h2>
<h3 id="suma-log-path">Suma Log Path</h3>
<p>Ordinarily to set up read/write permissions on the log path, you just need to identify the group that the apache user belongs to, add the log file and its parent folders to that group, and then give the group write permissions. Something like this:</p>
<pre><code>chgrp apache /var/www/html/suma
chmod 775 /var/www/html/suma
</code></pre>

<pre><code>chgrp apache /var/www/html/suma/log
chmod 775 /var/www/html/suma/log
</code></pre>

<pre><code>touch /var/www/html/suma/log/sumaserver.log
chgrp apache /var/www/html/suma/log/sumaserver.log
chmod 775 /var/www/html/suma/log/sumaserver.log
</code></pre>

<p>That assumes that your apache user’s group is “apache” (on Debian-based systems the default is www-data), and that the path to your Suma client installation is /var/www/html/suma (which will vary according to where you installed it). Ordinarily, that would be enough, and the file should be there and writable.</p>
<p>But in the case of SELinux, there is a complication. SELinux is a security layer used by Red Hat Enterprise Linux and CentOS. Among other things, SELinux restricts read/write access to files by the Apache process even when the file permissions are otherwise correct, which cause Suma not to work correctly.</p>
<p>Correcting it requires running some additional commands:</p>
<pre><code>chcon -t httpd_sys_rw_content_t /var/www/html/suma
chcon -t httpd_sys_rw_content_t /var/www/html/suma/log
chcon -t httpd_sys_rw_content_t /var/www/html/suma/log/sumaserver.log
</code></pre>

<p>The command sets the “security context” of the files to designate them as files that Apache is allowed to read and write. That should persuade SELinux that yes, it really is OK for Suma to write its own log file.</p>
<p>(Thanks to Will Martin of the University of North Dakota.)</p>
<h2 id="github-issues">GitHub Issues</h2>
<p><a href="https://github.com/suma-project/Suma/issues">Closed Suma issues</a> on Github may also be a good source of information for troubleshooting your installation.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../faq/" class="btn btn-neutral float-right" title="Frequently Asked Questions">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../installation/" class="btn btn-neutral" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/suma-project/Suma/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../installation/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../faq/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
